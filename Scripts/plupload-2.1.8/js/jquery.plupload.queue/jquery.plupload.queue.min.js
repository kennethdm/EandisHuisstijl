(function(n,t){function i(n){return plupload.translate(n)||n}function u(t,r){r.contents().each(function(t,i){i=n(i);i.is(".plupload")||i.remove()});r.prepend('<div class="plupload_wrapper plupload_scroll"><div id="'+t+'_container" class="plupload_container"><div class="plupload"><div class="plupload_header"><div class="plupload_header_content"><div class="plupload_header_title">'+i("Select files")+'<\/div><div class="plupload_header_text">'+i("Add files to the upload queue and click the start button.")+'<\/div><\/div><\/div><div class="plupload_content"><div class="plupload_filelist_header"><div class="plupload_file_name">'+i("Filename")+'<\/div><div class="plupload_file_action">&nbsp;<\/div><div class="plupload_file_status"><span>'+i("Status")+'<\/span><\/div><div class="plupload_file_size">'+i("Size")+'<\/div><div class="plupload_clearer">&nbsp;<\/div><\/div><ul id="'+t+'_filelist" class="plupload_filelist"><\/ul><div class="plupload_filelist_footer"><div class="plupload_file_name"><div class="plupload_buttons"><a href="#" class="btn btn-default" id="'+t+'_browse"><i class="fa fa-plus"><\/i>'+i("Add Files")+'<\/a><a href="#" class="btn btn-default"><i class="fa fa-arrow-up"><\/i>'+i("Start Upload")+'<\/a><\/div><span class="plupload_upload_status"><\/span><\/div><div class="plupload_file_action"><\/div><div class="plupload_file_status"><span class="plupload_total_status">0%<\/span><\/div><div class="plupload_file_size"><span class="plupload_total_file_size">0 b<\/span><\/div><div class="plupload_progress"><div class="plupload_progress_container"><div class="plupload_progress_bar"><\/div><\/div><\/div><div class="plupload_clearer">&nbsp;<\/div><\/div><\/div><\/div><\/div><input type="hidden" id="'+t+'_count" name="'+t+'_count" value="0" /><\/div>')}var r={};n.fn.pluploadQueue=function(f){return f?(this.each(function(){function c(t){var i,r;t.status==plupload.DONE&&(i="plupload_done");t.status==plupload.FAILED&&(i="plupload_failed");t.status==plupload.QUEUED&&(i="plupload_delete");t.status==plupload.UPLOADING&&(i="plupload_uploading");r=n("#"+t.id).attr("class",i).find("a").css("display","block");t.hint&&r.attr("title",t.hint)}function a(){n("span.plupload_total_status",o).html(e.total.percent+"%");n("div.plupload_progress_bar",o).css("width",e.total.percent+"%");n("span.plupload_upload_status",o).html(t.sprintf(i("Uploaded %d/%d files"),e.total.uploaded,e.files.length))}function l(){var f=n("ul.plupload_filelist",o).html(""),r=0,u;n.each(e.files,function(t,i){u="";i.status==plupload.DONE&&(i.target_name&&(u+='<input type="hidden" name="'+s+"_"+r+'_tmpname" value="'+plupload.xmlEncode(i.target_name)+'" />'),u+='<input type="hidden" name="'+s+"_"+r+'_name" value="'+plupload.xmlEncode(i.name)+'" />',u+='<input type="hidden" name="'+s+"_"+r+'_status" value="'+(i.status==plupload.DONE?"done":"failed")+'" />',r++,n("#"+s+"_count").val(r));f.append('<li id="'+i.id+'"><div class="plupload_file_name"><span>'+i.name+'<\/span><\/div><div class="plupload_file_action"><a href="#"><\/a><\/div><div class="plupload_file_status">'+i.percent+'%<\/div><div class="plupload_file_size">'+plupload.formatSize(i.size)+'<\/div><div class="plupload_clearer">&nbsp;<\/div>'+u+"<\/li>");c(i);n("#"+i.id+".plupload_delete a").click(function(t){n("#"+i.id).remove();e.removeFile(i);t.preventDefault()})});n("span.plupload_total_file_size",o).html(plupload.formatSize(e.total.size));e.total.queued===0?n("span.plupload_add_text",o).html(i("Add Files")):n("span.plupload_add_text",o).html(t.sprintf(i("%d files queued"),e.total.queued));n("a.plupload_start",o).toggleClass("plupload_disabled",e.files.length==e.total.uploaded+e.total.failed);f[0].scrollTop=f[0].scrollHeight;a();!e.files.length&&e.features.dragdrop&&e.settings.dragdrop&&n("#"+s+"_filelist").append('<li class="plupload_droptext">'+i("Drag files here.")+"<\/li>")}function v(){delete r[s];e.destroy();o.html(h);e=o=h=null}var e,o,s,h;o=n(this);s=o.attr("id");s||(s=plupload.guid(),o.attr("id",s));h=o.html();u(s,o);f=n.extend({dragdrop:!0,browse_button:s+"_browse",container:s},f);f.dragdrop&&(f.drop_element=s+"_filelist");e=new plupload.Uploader(f);r[s]=e;e.bind("UploadFile",function(t,i){n("#"+i.id).addClass("plupload_current_file")});e.bind("Init",function(t,i){if(!f.unique_names&&f.rename)o.on("click","#"+s+"_filelist div.plupload_file_name span",function(i){var r=n(i.target),u,f,e,o="";u=t.getFile(r.parents("li")[0].id);e=u.name;f=/^(.+)(\.[^.]+)$/.exec(e);f&&(e=f[1],o=f[2]);r.hide().after('<input type="text" />');r.next().val(e).focus().blur(function(){r.show().next().remove()}).keydown(function(t){var i=n(this);t.keyCode==13&&(t.preventDefault(),u.name=i.val()+o,r.html(u.name),i.blur())})});n("#"+s+"_container").attr("title","Using runtime: "+i.runtime);n("a.plupload_start",o).click(function(t){n(this).hasClass("plupload_disabled")||e.start();t.preventDefault()});n("a.plupload_stop",o).click(function(n){n.preventDefault();e.stop()});n("a.plupload_start",o).addClass("plupload_disabled")});e.bind("Error",function(t,r){var u=r.file,f;u&&(f=r.message,r.details&&(f+=" ("+r.details+")"),r.code==plupload.FILE_SIZE_ERROR&&alert(i("Error: File too large:")+" "+u.name),r.code==plupload.FILE_EXTENSION_ERROR&&alert(i("Error: Invalid file extension:")+" "+u.name),u.hint=f,n("#"+u.id).attr("class","plupload_failed").find("a").css("display","block").attr("title",f));r.code===plupload.INIT_ERROR&&setTimeout(function(){v()},1)});e.bind("PostInit",function(t){t.settings.dragdrop&&t.features.dragdrop&&n("#"+s+"_filelist").append('<li class="plupload_droptext">'+i("Drag files here.")+"<\/li>")});e.init();e.bind("StateChanged",function(){e.state===plupload.STARTED?(n("li.plupload_delete a,div.plupload_buttons",o).hide(),e.disableBrowse(!0),n("span.plupload_upload_status,div.plupload_progress,a.plupload_stop",o).css("display","block"),n("span.plupload_upload_status",o).html("Uploaded "+e.total.uploaded+"/"+e.files.length+" files"),f.multiple_queues&&n("span.plupload_total_status,span.plupload_total_file_size",o).show()):(l(),n("a.plupload_stop,div.plupload_progress",o).hide(),n("a.plupload_delete",o).css("display","block"),f.multiple_queues&&e.total.uploaded+e.total.failed==e.files.length&&(n(".plupload_buttons,.plupload_upload_status",o).css("display","inline"),e.disableBrowse(!1),n(".plupload_start",o).addClass("plupload_disabled"),n("span.plupload_total_status,span.plupload_total_file_size",o).hide()))});e.bind("FilesAdded",l);e.bind("FilesRemoved",function(){var t=n("#"+s+"_filelist").scrollTop();l();n("#"+s+"_filelist").scrollTop(t)});e.bind("FileUploaded",function(n,t){c(t)});e.bind("UploadProgress",function(t,i){n("#"+i.id+" div.plupload_file_status",o).html(i.percent+"%");c(i);a()});f.setup&&f.setup(e)}),this):r[n(this[0]).attr("id")]}})(jQuery,mOxie);
//# sourceMappingURL=jquery.plupload.queue.min.js.map
